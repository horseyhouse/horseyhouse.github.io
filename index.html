<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="./style.css">
  <title>Oysters 69</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    // Redirect from 404
    (function(){
      var redirect = sessionStorage.redirect;
      delete sessionStorage.redirect;
      if (redirect && redirect != location.href) {
        history.replaceState(null, null, redirect);
      }
    })();
  </script>
  <script src="https://unpkg.com/vue@3.2.37/dist/vue.global.prod.js"></script>
  <script src="https://unpkg.com/vue-router@4.0.16/dist/vue-router.global.prod.js"></script>
</head>

<body>
<div id="app">
  <h1>
    <log-in></log-in>
    <router-link to="/">
      Hello
      <template v-if="$graffiti.loggedIn">
        Anonymous Oyster
      </template>
      <template v-else>
        Fellow Oyster
      </template>
    </router-link>
    <log-in></log-in>
  </h1>
  <h2>
    <img src="./media/construction.gif" alt="Under Construction">
  </h2>

  <router-view></router-view>
</div>

<script type="text/x-template" id="login">
  <label>
    <input type="checkbox" class="login"
      :checked="$graffiti.loggedIn"
      @change="$event.target.checked?
        $graffiti.logIn() :
        $graffiti.logOut()">
    <img src="./media/oyster.gif" />
    <p>
      ↑ click here to log
      <template v-if="$graffiti.loggedIn">
        out
      </template>
      <template v-else>
        in
      </template>
      ↑
    </p>
  </label>
</script>

<script type="text/x-template" id="home">
<div class="columns">
  <ol>
    <h3>
      Internal Links
    </h3><br>
    <router-link to="/about">
      <li>
        <img src="./media/about.gif" alt="About">
        <img src="./media/hamster-house.gif" alt="About">
      </li>
    </router-link>
    <router-link to="/chat">
      <li>
        Chat
      </li>
    </router-link>
    <router-link to="/photos">
      <li>
        <img src="./media/redPhotos.gif" alt="Photos">
        <img src="./media/furby-cam.GIF" alt="Photos">
      </li>
    </router-link>
    <router-link to="/events">
      <li>
        <img src="./media/events.gif" alt="Events">
        <img src="./media/calendar.gif" alt="Events">
      </li>
    </router-link>
    <router-link to="/ledger">
      <li>
        <img src="./media/ledger.gif" alt="Ledger">
        <img src="./media/monopoly-man.gif" alt="Ledger">
      </li>
    </router-link>
  </ol>
  <ol>
    <h3>
      External Links
    </h3><br>
    <a href="http://tfh.sh:46202/transmission/web/" target="_blank">
      <li>
        <img src="./media/torrenting.gif" alt="Torrenting">
        <img src="./media/pirate-flag.gif" alt="Torrenting">
      </li>
    </a>
    <a href="https://app.plex.tv" target="_blank">
      <li>
        <img src="./media/plex.gif" alt="Plex">
        <img src="./media/film.gif" alt="Plex">
      </li>
    </a>
    <a href="https://github.com/oysters69" target="_blank">
      <li>
        <img src="./media/github2.gif" alt="Github">
        <img src="./media/compooper.gif" alt="Github">
      </li>
    </a>
    <a href="https://drive.google.com/drive/folders/1X1ASnjqRPqbdrAG7p2Xe34t1mtIDAzK7" target="_blank">
      <li>
        <img src="./media/drive.gif" alt="Google Drive">
        <img src="./media/google.gif" alt="Google Drive">
      </li>
    </a>
  </ol>
</div>
</script>

<script type="text/x-template" id="about">
  <h3>
    <img src="./media/about.gif" alt="About">
  </h3>
  <p>
    we're really cool.
  </p>
</script>

<script type="text/x-template" id="chat">
  <h3>
    Chat
  </h3>
  <p>
    <graffiti-collection v-slot="messages"
      :query="{
        type: 'post',
        summary: { $type: 'string' },
        tags: 'oyster'
      }">
      <ul>
        <li v-for="m in messages.objects.slice().reverse()" :key="m._id">
          {{m.summary}}
        </li>
      </ul>
      <p v-if="!$graffiti.loggedIn">
        u gotta b logged in to chat homie
      </p>
      <form v-else @submit.prevent="messages.update({
        type: 'post',
        summary: message,
        tags: ['oyster']
      }); message=''">
        <input v-model="message">
        <input type="image" src="./media/oyster.jpg" border="0" alt="Submit" />
      </form>
    </graffiti-collection>
  </p>
</script>

<script type="text/x-template" id="events">
  <h3>
    <img src="./media/events.gif" alt="Events">
  </h3>
  <p>
    coming soon...
  </p>
</script>

<script type="text/x-template" id="ledger">
  <h3>
    <img src="./media/ledger.gif" alt="Ledger">
  </h3>
  <p>
    coming soon...
  </p>
</script>

<script type="text/x-template" id="photos">
  <h3>
    <img src="./media/redPhotos.gif">
  </h3>

  <ul>
    <li>
      <img src="./photos/IMG_0007.HEIC">
      <img src="./photos/IMG_0008.HEIC">
      <p>the view from the couch</p>
    </li>
    <li>
      <img src="./photos/IMG_0234.HEIC">
      <img src="./photos/IMG_4821.HEIC">
      <p>2 hoes</p>
    </li>
    <li>
      <img style="max-width: 100%" src="./photos/IMG_5199.HEIC">
      <p>pets bask in the sun in theia's room</p>
    </li>
    <li>
      <img src="./photos/IMG_5008.HEIC">
      <img src="./photos/IMG_5009.HEIC">
      <p>theia's gooey gooey sauce</p>
    </li>
    <li>
      <img src="./photos/IMG_5005.HEIC">
      <img src="./photos/IMG_5006.HEIC">
      <p>trust the process</p>
    </li>
    <li>
      <img src="./photos/IMG_4528.HEIC">
      <img src="./photos/IMG_4536.HEIC">
      <p>we hate mass save!</p>
    </li>
    <li>
      <img src="./photos/IMG_4862.HEIC">
      <img src="./photos/IMG_0051.HEIC">
      <p>noodle vibes in moogy's room</p>
    </li>
  </ul>
</script>

<script type="module">
  import Graffiti from "https://csail-graffiti.github.io/vue/plugin.js"

  const Login = { template: '#login' }

  const Router = VueRouter.createRouter({
    history: VueRouter.createWebHistory(),
    routes: [
      { path: '/', component: {
        template: '#home'
      }},
      { path: '/about', component: {
        template: '#about'
      }},
      { path: '/events', component: {
          template: '#events'
        }},
      { path: '/ledger', component: {
          template: '#ledger'
        }},
      { path: '/photos', component: {
        template: '#photos'
      }},
      { path: '/chat', component: {
        template: '#chat',
        data: () => ({
          message: ''
        })
      }}
    ],
  })

  Graffiti('https://graffiti.csail.mit.edu').then(g=> {
    Vue.createApp().use(g)
    .component('log-in', Login)
    .use(Router)
    .mount('#app')
  })
</script>

</body>
</html> 
